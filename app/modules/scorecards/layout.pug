div.my-scorecards
  h1 My Scorecards

  section.scorecard-filters.filters.clearfix
    div.radio-filters
      label Ending Time Period
      md-radio-group(ng-model="s.depletionRadio")
        md-radio-button(ng-repeat="filter in s.filtersService.model.timePeriod" class="md-primary block" ng-value="filter.value" aria-label="{{filter.name}}") {{filter.name}}

    div.dropdown-filter
      div.dropdown
        label Depletions Time Period
        md-select(ng-model="s.depletionSelect" md-on-close="s.changeDepletionScorecard(false)" aria-label="Depletion Select")
          md-option(ng-repeat="filter in s.depletionSelectOptions[s.depletionRadio]" aria-label="{{filter.name}}" value="{{filter.name}}") {{filter.name}}
      div.dropdown
        label Distribution Time Period
        md-select(ng-model="s.distributionSelectOptions.selected" placeholder="{{s.distributionSelectOptions.values[0].name}}")
          md-option(ng-repeat="filter in s.distributionSelectOptions.values" aria-label="{{filter.name}}" value="{{filter.value}}") {{filter.name}}

  section.depeletions-scorecard
    div.scorecard-header.clearfix
      div.scorecard-header-left
        h2 My Depletions Scorecard
        h3 {{s.filtersService.model.selected.depletionsTimeFilter}}
      div.scorecard-header-right
        p.accent Total Depletions / % Trend vs YA
        h3.bold {{s.totalRow.depletions | number:0 }}
          span &nbsp;CE
          div.value.positive(ng-class="{'negative': !s.isPositive(s.totalRow.percentTrend)}") <span ng-if="s.isPositive(s.totalRow.percentTrend)">+</span>{{s.totalRow.percentTrend | number:1}}<span>%</span>

    div.scorecard-table
      table(cellspacing="0" cellpadding="0")
        thead
          tr
            th.accent.brand.border Brand
            th(colspan=7).accent.border Depletions
            th(colspan=2).border
              .tooltip-wrap
                 p.accent CTV
                   .tooltip.abbreviation-tooltip
                     img(src="../assets/img/icons/help-tooltip.svg")
                     md-tooltip(md-direction="bottom")
                       label Scorecard
                       h3 Contribution to Volume
                       p Contribution to Volume (CTV) indicates the brand mix, or the % contribution of a brand to Total volume.
            th(colspan=2)
              .tooltip-wrap
                p.accent.bold CTG
                .tooltip.abbreviation-tooltip
                    img(src="../assets/img/icons/help-tooltip.svg")
                    md-tooltip(md-direction="bottom")
                      label Scorecard
                      h3 Contribution to Growth
                      p Contribution to Growth (CTG) indicates the % contribution of a brand to Total growth (for the selected time period TY vs. YA). To determine CTG, calculate incremental volume (TY – YA) for each brand and divide by the Total (net).  Only positive numbers (as those are the growth indicators) are taken into account.
          tr
            th.accent.border &nbsp;
            th.accent FYTD
            th.accent VS YA
            th.accent VS YA %
            th.accent VS ABP
            th.accent VS ABP %
            th.accent BU vs YA %
            th.accent.border MY % vs BU %
            th.accent To My Total %
            th.accent.border To BU Total %
            th.accent To My Total %
            th.accent To BU Total %
        tbody
          tr
            td.column-total.left.no-border TOTAL
            td.column-total.dark-blue.no-border {{s.totalRow.depletions | number:0 }}
            td.column-total.blue.no-border {{s.totalRow.gap | number:0 }}
            td.column-total.blue.no-border {{s.totalRow.percentTrend | number:1 }}%
            td.column-total {{s.totalRow.percentBUTrend | number:1 }}%
            td.column-total.no-border.positive(ng-class="{'negative': !s.isPositive(s.totalRow.percentBUTrend)}") &#9650;
            td.column-total {{s.totalRow.gapVsPlan | number:0 }}
            td.column-total.no-border {{s.totalRow.percentGapVsPlan | number:1}}%
            td.column-total {{s.totalRow.volumePercent | number:1}}%
            td.column-total.no-border {{s.totalRow.volumeBU | number:1}}%
            td.column-total {{s.totalRow.growthPercent | number:1}}%
            td.column-total.no-border {{s.totalRow.growthBU | number:1}}%
          div {{s.filtersService.model.selected.depletionsTimeFilter}}
          tr(ng-repeat="depletion in s.userService.model.depletion")
            td.left.data-brand(analytics-on="click" analytics-event="Brand Performance") {{depletion.name}}
            td.dark(ng-repeat-start="measure in depletion.measures | filter: {timeframe: s.depletionSelect}: true") {{measure.depletions | number:0}}
            td.medium-dark(ng-class="{'negative': !s.isPositive(measure.depletionsTrend)}") {{measure.depletionsGap | number:0}}
            td.medium-dark.no-border(ng-class="{'negative': !s.isPositive(measure.depletionsTrend)}") {{measure.depletionsTrend | number:1}}%
            td(ng-class="{'negative': !s.isPositive(measure.depletionsBUTrend)}") {{measure.depletionsBUTrend | number:1}}%
            td.no-border.rotate(ng-class="s.isPositive(measure.depletionsBUTrend) ? 'positive' : 'negative'") &#9660;
            td(ng-class="{'negative': !s.isPositive(measure.vsPlan)}") {{measure.vsPlan | number:0 }}
            td.no-border(ng-class="{'negative': !s.isPositive(measure.vsPlanPercent)}") {{measure.vsPlanPercent | number:1}}%
            td(ng-class="{'negative': !s.isPositive(measure.depletions / s.totalRow.depletions)}") {{(measure.depletions / s.totalRow.depletions) * 100 | number:1}}%
            td.no-border(ng-class="{'negative': !s.isPositive(measure.depletionsBU / s.totalRow.depletionsBU)}") {{(measure.depletionsBU / s.totalRow.depletionsBU) * 100 | number:1}}%
            td(ng-class="{'negative': !s.isPositive(measure.depletionsGap / s.totalRow.gap)}") {{(measure.depletionsGap / s.totalRow.gap) * 100 | number:1}}%
            td.no-border(ng-repeat-end ng-class="{'negative': !s.isPositive(measure.depletionsGap / s.totalRow.depletionsBU)}") {{(measure.depletionsGap / s.totalRow.depletionsBU) * 100 | number:1}}%

  section.distributions-scorecard
    div.scorecard-header.clearfix
      div.scorecard-header-left
        h2 My Distribution Scorecard
        h3 {{s.filtersService.model.selected.distributionTimeFilter}}
      div.scorecard-header-right
        p.accent Total Effective PODS / VS YA %
        h3.bold {{s.performanceData.performance[1].measures[0].value | number }}&nbsp;
          div.positive(ng-class="{'negative': !s.isPositive(s.performanceData.performance[1].measures[0].percentChange)}") <span ng-if="s.isPositive(s.performanceData.performance[1].measures[0].percentChange)">+</span>{{s.performanceData.performance[1].measures[0].percentChange}}<span>%</span>
    div.scorecard-filter
      div.radio-button-group
        div {{s.distributionRadioOptions.selected.onOffPremise}}
        md-radio-group(ng-model="s.distributionRadioOptions.selected.onOffPremise" aria-label="Premise Filter" ng-change="s.changePremise();")
          md-radio-button(ng-repeat="filter in s.distributionRadioOptions.premises | orderBy: 'name'" class="md-primary" ng-value="filter.name" aria-label="{{filter.name}}") {{filter.name}}
      div.radio-button-group
        div {{s.distributionRadioOptions.selected.placementType}}
        md-radio-group(ng-model="s.distributionRadioOptions.selected.placementType" aria-label="Placement Type Filter")
          md-radio-button(ng-repeat="filter in s.distributionRadioOptions.placementType" class="md-primary" ng-value="filter.name" aria-label="{{filter.name}}") {{filter.name}}

    div.scorecard-table
      div {{s.distributionSelectOptions.selected}}
      table(cellspacing="0" cellpadding="0")
        thead
          tr
            th.accent.brand.border Brand
            th(colspan=7).accent.border Points of Distribution
            th(colspan=2).accent.border
              .tooltip-wrap
                 p.accent.border Contribution To Volume
                   .tooltip
                     img(src="../assets/img/icons/help-tooltip.svg")
                     md-tooltip(md-direction="bottom")
                       label Scorecard
                       h3 Contribution to Volume
                       p Contribution to Volume (CTV) indicates the brand mix, or the % contribution of a brand to Total volume.
            th(colspan=2)
              .tooltip-wrap
                p.accent.bold Contribution To Growth
                  .tooltip
                    img(src="../assets/img/icons/help-tooltip.svg")
                    md-tooltip(md-direction="bottom")
                      label Scorecard
                      h3 Contribution to Growth
                      p Contribution to Growth (CTG) indicates the % contribution of a brand to Total growth (for the selected time period TY vs. YA). To determine CTG, calculate incremental volume (TY – YA) for each brand and divide by the Total (net).  Only positive numbers (as those are the growth indicators) are taken into account.

          tr
            th.accent.border &nbsp;
            th.accent L90
            th.accent VS YA
            th.accent VS YA %
            th.accent VS ABP
            th.accent VS ABP %
            th.accent BU vs YA %
            th.accent.border MY % vs BU %
            th.accent To My Total %
            th.accent.border To BU Total %
            th.accent To My Total %
            th.accent To BU Total %
        tbody
          tr
            td.column-total.left.no-border TOTAL
            td.column-total.highlight {{273400 | number }}
            td.column-total.highlight {{1532 | number }}
            td.column-total.highlight.no-border {{7.5 | number:1}}%
            td.column-total.highlight {{1532 | number }}
            td.column-total.highlight.no-border {{1 | number:1}}%
            td.column-total {{4 | number:1}}%
            td.column-total.positive.no-border &#9650;
            td.column-total {{1532 | number }}
            td.column-total.no-border 4%
            td.column-total 100%
            td.column-total.no-border 12%
            td.column-total 100%
            td.column-total.no-border 12%
          //-tr(ng-repeat="distribution in s.distributionData.performance")
            td.left.data-brand(analytics-on="click" analytics-event="Brand Performance") {{distribution.name}}
            td(ng-class="{'negative': !s.isPositive(distribution.measures.distributions)}").dark         {{distribution.measures.distributions | number }}
            td(ng-class="{'negative': !s.isPositive(distribution.measures.yearAgoGap)}").medium-dark                {{distribution.measures.yearAgoGap | number }}
            td(ng-class="{'negative': !s.isPositive(distribution.measures.yearAgoTrend) }").medium-dark.no-border              {{distribution.measures.yearAgoTrend}}%
            td(ng-class="{'negative': !s.isPositive(distribution.measures.yearAgoBuTrend)}")             {{distribution.measures.yearAgoBuTrend}}%
            td(ng-class="{'negative': !s.isPositive(distribution.measures.yearAgoTrend - distribution.measures.yearAgoBuTrend),'positive': !!s.isPositive(distribution.measures.yearAgoTrend - distribution.measures.yearAgoBuTrend) }").no-border &#9660;
            td(ng-class="{'negative': !s.isPositive(distribution.measures.vsPlanNumber)}")          {{distribution.measures.vsPlanNumber | number }}
            td(ng-class="{'negative': !s.isPositive(distribution.measures.vsPlanPercent)}").no-border         {{distribution.measures.vsPlanPercent}}%
            td(ng-class="{'negative': !s.isPositive(distribution.measures.volumeContribution)}")         {{distribution.measures.volumeContribution}}%
            td(ng-class="{'negative': !s.isPositive(distribution.measures.volumeContributionBu)}").no-border       {{distribution.measures.volumeContributionBu}}%
            td(ng-class="{'negative': !s.isPositive(distribution.measures.growthContribution)}")    {{distribution.measures.growthContribution}}%
            td(ng-class="{'negative': !s.isPositive(distribution.measures.growthContributionBu)}").no-border  {{distribution.measures.growthContributionBu}}%
          tr(ng-repeat="distribution in s.userService.model.distribution")
            td.left.data-brand(analytics-on="click" analytics-event="Brand Performance") {{distribution.name}}
            td.dark(ng-repeat-start="measure in distribution.measures | filter: {timeframe: s.distributionTimeframe}: true" ng-class="{'negative': !s.isPositive(distribution.measures.distributions)}") {{distribution.measures.distributions | number }}
            //-td.medium-dark(ng-class="{'negative': !s.isPositive(distribution.measures.yearAgoGap)}") {{distribution.measures.yearAgoGap | number }}
            //-td.medium-dark.no-border(ng-class="{'negative': !s.isPositive(distribution.measures.yearAgoTrend) }") {{distribution.measures.yearAgoTrend}}%
            //-td(ng-class="{'negative': !s.isPositive(distribution.measures.yearAgoBuTrend)}") {{distribution.measures.yearAgoBuTrend}}%
            //-td.no-border(ng-class="{'negative': !s.isPositive(distribution.measures.yearAgoTrend - distribution.measures.yearAgoBuTrend),'positive': !!s.isPositive(distribution.measures.yearAgoTrend - distribution.measures.yearAgoBuTrend) }") &#9660;
            //-td(ng-class="{'negative': !s.isPositive(distribution.measures.vsPlanNumber)}") {{distribution.measures.vsPlanNumber | number }}
            //-td.no-border(ng-class="{'negative': !s.isPositive(distribution.measures.vsPlanPercent)}") {{distribution.measures.vsPlanPercent}}%
            //-td(ng-class="{'negative': !s.isPositive(distribution.measures.volumeContribution)}") {{distribution.measures.volumeContribution}}%
            //-td.no-border(ng-class="{'negative': !s.isPositive(distribution.measures.volumeContributionBu)}") {{distribution.measures.volumeContributionBu}}%
            //-td(ng-class="{'negative': !s.isPositive(distribution.measures.growthContribution)}") {{distribution.measures.growthContribution}}%
            td.no-border(ng-repeat-end ng-class="{'negative': !s.isPositive(distribution.measures.growthContributionBu)}") {{distribution.measures.growthContributionBu}}%
