.opportunity-header(column='12')
  .row
    h1(column='9') Opportunities
    .saved-filter-select(column='3')
      md-input-container
        label Saved Filters
        md-select(ng-model="o.savedFilterSelect")
          md-option(ng-repeat="filter in o.userData.savedFilters" value="{{filter.name}}") {{filter.name}}
.chips
  md-chips(ng-model="o.chip.model" name="Active Filters" md-on-remove="o.chip.methods.removeFromFilterObj($chip)")
    input(disabled="true")
    md-chip-template
      div {{$chip.name}}
.filters(column='12')
  .row(class='clearfix')
    div(class='more-filters')
      a(ng-click="o.filter.expanded = o.filter.expanded ? false : true")
        span(ng-class="{ 'chevron-up': o.filter.expanded, 'chevron-down': !o.filter.expanded }")
        span(ng-if="o.filter.expanded") Less Filters
        span(ng-if="!o.filter.expanded") More Filters
    div(column='3')
      label Account Scope
      md-checkbox(ng-model="o.filter.selected.accountScope" aria-label="My Accounts" ng-click="o.chip.methods.updateChip('accountScope', 'My Accounts Only')") My Accounts Only
    div(column='3')
      label Premise Type
      md-radio-group(ng-model="o.filter.selected.premiseType")
        md-radio-button(ng-repeat="p in o.filter.premises" class="md-primary" ng-value="p.name" aria-label="p.name" ng-click="o.chip.methods.addChip(p.name, 'premiseType', true)") {{p.name}}
    div(column='6')
      label Opportunity Status
      md-radio-group(ng-model="o.filter.selected.opportunitiesStatus")
        md-radio-button(ng-repeat="opportunity in o.filter.opportunitiesStatus" class="md-primary" ng-value="opportunity.name" aria-label="opportunity.name" ng-click="o.chip.methods.addChip(opportunity.name, 'opportunitiesStatus', true)") {{opportunity.name}}
  .row(class="clearfix")
    div(column='3')
      label Opportunity Type
      md-input-container
        md-select(ng-model="o.filter.selected.opportunitiesTypes" aria-label="Opportunity Type" md-on-close="o.chip.methods.addChip(o.filter.selected.opportunitiesTypes, 'opportunitiesTypes', false)")
          md-option(ng-repeat="type in o.filter.opportunitiesTypes" aria-label="type.name" value="{{type.name}}") {{type.name}}
    div(column='3')
      label Brand / Master SKU
      md-autocomplete(md-selected-item="selectedItem" md-search-text="o.filter.brandSearchText" md-items="brand in o.filter.brands | filter:o.filter.brandSearchText" md-item-text="brand.name" md-min-length="1" placeholder="by Brand or SKU" md-selected-item-change="o.chip.methods.addAutocompleteChip(brand.name, 'brandSearchText')")
        md-item-template
          div(md-highlight-text="o.filter.brandSearchText" md-highlight-flags="^i") {{brand.name}} - {{brand.size}}
    div(column='3')
      label Account / Store
      md-autocomplete(md-search-text="o.filter.accountSearchText" md-items="account in o.filter.accounts | filter:o.filter.accountSearchText" md-item-text="account.name" placeholder="By Account, Sub account" md-selected-item-change="o.chip.methods.addAutocompleteChip(account.name, 'accountSearchText')")
        md-item-template
          div(md-highlight-text="o.filter.accountSearchText" md-highlight-flags="^i") {{account.name}} - {{account.subAccount}}
    div(column='3')
      label Distributor
      md-autocomplete(md-search-text="o.filter.distributorSearchText" md-items="distributor in o.filter.distributors | filter:o.filter.distributorSearchText" md-item-text="distributor.name" placeholder="by Name" md-selected-item-change="o.chip.methods.addAutocompleteChip(distributor.name, 'distributorSearchText')")
        md-item-template
          div(md-highlight-text="o.filter.distributorSearchText" md-highlight-flags="^i") {{distributor.name}}
  .row
    div(column='3' ng-show="o.filter.expanded")
      label Predicted Impact
      md-checkbox(ng-model="o.filter.selected.predictedImpactHigh" aria-label="Predicted Impact High" ng-click="o.chip.methods.updateChip('predictedImpactHigh', 'Predicted Impact High')") High
      md-checkbox(ng-model="o.filter.selected.predictedImpactMedium" aria-label="Predicted Impact Medium" ng-click="o.chip.methods.updateChip('predictedImpactMedium', 'Predicted Impact Medium')") Medium
      md-checkbox(ng-model="o.filter.selected.predictedImpactLow" aria-label="Predicted Impact Low" ng-click="o.chip.methods.updateChip('predictedImpactLow', 'Predicted Impact Low')") Low
    div(column='3' ng-show="o.filter.expanded")
      label Product Type
      md-checkbox(ng-model="o.filter.selected.productTypeFeatured" aria-label="Product Type Featured" ng-click="o.chip.methods.updateChip('productTypeFeatured', 'Product Type Featured')") Featured
      md-checkbox(ng-model="o.filter.selected.productTypePriority" aria-label="Product Type Priority Packages" ng-click="o.chip.methods.updateChip('productTypePriority', 'Product Type Priority')") Priority Packages
      md-checkbox(ng-model="o.filter.selected.productTypeAuthorized" aria-label="Product Type Authorized" ng-click="o.chip.methods.updateChip('productTypeAuthorized', 'Product Type Authorized')") Authorized
    div(column='3' ng-show="o.filter.expanded")
      .row
        div(column='12')
          label Store Type
          md-checkbox(ng-model="o.filter.selected.storeTypeIndependent" aria-label="Store Type Independent" ng-click="o.chip.methods.updateChip('storeTypeIndependent', 'Store Type Independent')") Independent
          md-checkbox(ng-model="o.filter.selected.storeTypeCBBD" aria-label="Store Type CBBD" ng-click="o.chip.methods.updateChip('storeTypeCBBD', 'Store Type CBBD')") CBBD Chain
        div(column='12' class="store-segmentation")
          label Store Segmentation
          md-checkbox(column='3' ng-model="o.filter.selected.storeSegmentationA" aria-label="Store Segmentation A" ng-click="o.chip.methods.updateChip('storeSegmentationA', 'Store Segmentation A')") A
          md-checkbox(column='3' ng-model="o.filter.selected.storeSegmentationB" aria-label="Store Segmentation B" ng-click="o.chip.methods.updateChip('storeSegmentationB', 'Store Segmentation B')") B
          md-checkbox(column='3' ng-model="o.filter.selected.storeSegmentationC" aria-label="Store Segmentation C" ng-click="o.chip.methods.updateChip('storeSegmentationC', 'Store Segmentation C')") C
        div(column='12' class="trade-channel")
          label Trade Channel
          md-checkbox(column='5' ng-model="o.filter.selected.tradeChannelGrocery" aria-label="Trade Channel Grocery" ng-click="o.chip.methods.updateChip('tradeChannelGrocery', 'Trade Channel Grocery')") Grocery
          md-checkbox(column='5' ng-model="o.filter.selected.tradeChannelConvenience" aria-label="Trade Channel Convenience" ng-click="o.chip.methods.updateChip('tradeChannelConvenience', 'Trade Channel Convenience')") Convenience
          md-checkbox(column='5' ng-model="o.filter.selected.tradeChannelDrug" aria-label="Trade Channel Drug" ng-click="o.chip.methods.updateChip('tradeChannelDrug', 'Trade Channel Drug')") Drug
          md-checkbox(column='5' ng-model="o.filter.selected.tradeChannelMassMerchandiser" aria-label="Trade Channel Mass Merchandiser" ng-click="o.chip.methods.updateChip('tradeChannelMassMerchandiser', 'Trade Channel Mass Merchandiser')") Mass Merchandiser
          md-checkbox(column='5' ng-model="o.filter.selected.tradeChannelLiquor" aria-label="Trade Channel Liquor" ng-click="o.chip.methods.updateChip('tradeChannelLiquor', 'Trade Channel Liquor')") Liquor
          md-checkbox(column='5' ng-model="o.filter.selected.tradeChannelMilitary" aria-label="Trade Channel Military" ng-click="o.chip.methods.updateChip('tradeChannelMilitary', 'Trade Channel Military')") Military
          md-checkbox(column='5' ng-model="o.filter.selected.tradeChannelRecreation" aria-label="Trade Channel Recreation" ng-click="o.chip.methods.updateChip('tradeChannelRecreation', 'Trade Channel Recreation')") Recreation
          md-checkbox(column='5' ng-model="o.filter.selected.tradeChannelOther" aria-label="Trade Channel Other" ng-click="o.chip.methods.updateChip('tradeChannelOther', 'Trade Channel Other')") Other
    div(column='3' ng-show="o.filter.expanded")
      md-input-container
        label Location
        input(type="text" ng-model="o.filter.location")
      md-input-container
        label CBBD Contact
        input(type="text" ng-model="o.filter.cbbdContact")
    div(column='12' class='apply-filters')
      button(value='Apply Filters' type="button" class="button-sharing") Apply Filters

button.icon.select-all(ng-click="o.toggleAll()")
  span(ng-if='o.isChecked()') Un-
  | Select All
button.icon.expand-all(ng-click="o.accordion.expandAll()" ng-disabled="o.expandedOpportunities.length === o.opportunities.length") Expand All
button.icon.collapse-all(ng-click="o.accordion.collapseAll()" ng-disabled="o.expandedOpportunities.length < 2") Collapse All

v-accordion.styled-list(multiple="" id="opportunities" control="accordion" onexpand="o.expandCallback(item)" oncollapse="o.collapseCallback(item)" column='12')
  div.header-row(row)
    div.checkbox-wrapper.placeholder(ng-click="o.toggle(opportunity, o.selected)")
    div.checkbox-sibling
      div(column='3') Store / Number
      div(column='4') Address
      div(column='2') Opportunities
      div(column='1') Depletions CYTD
      div(column='1') Trend vs Ya
      div(column='1') Segmentation
  v-pane.list-item(row ng-repeat="opportunity in o.opportunities" expanded="o.opportunity.isExpanded")
    div.checkbox-wrapper(ng-click="o.toggle(opportunity, o.selected)")
      md-checkbox(aria-label="Select Item" ng-checked="o.exists(opportunity, o.selected)")
    v-pane-header.checkbox-sibling(column='12')
      div.cell-parent
        div.pad-cell(column='3') {{opportunity.store.name}} <span class="supporting-text">\#{{opportunity.store.id}}</span>
        div.address(column='4') {{opportunity.store.address}} <br><a href="#">Store Summary</a>
        div(column='2') {{opportunity.opCount}} <span class="supporting-text">({{opportunity.impact}} high)</span>
        div(column='1') {{opportunity.depletionsCYTD}}
        div(column='1' class="value" ng-class="{'positive' : opportunity.positiveValue, 'negative' : opportunity.negativeValue}") <span ng-if="opportunity.positiveValue">+</span>{{opportunity.depletionTrendVsYA}}<span>%</span>
        div(column='1') {{opportunity.store.segmentation}}
    v-pane-content(column='12' class="products" ng-class="{'open' : open}")
      div.title-row(row)
        div(column='1') &nbsp;
        div(column='2') Product
        div(column='2') Type
        div(column='4') Rationale
        div(column='1') Status
        div(column='1') Impact
        div(column='1') Hide
      div.cell-parent.sub-item(row ng-repeat="product in o.products")
        .regional-status(ng-if="product.regionalStatus")
          .featured(ng-if="product.regionalStatus === 'featured'")
          .mandatory(ng-if="product.regionalStatus === 'mandatory'")
          .both(ng-if="product.regionalStatus === 'both'")
        div(column='1') &nbsp;
        div(column='2') <span class="product-title">{{product.product}}</span><br>{{product.detail}}
        div.type(column='2') {{product.type}}
        div(column='4') {{product.rationale}}
        div(column='1') {{product.status}}
        div(column='1') {{product.predictedImpact}}
        div(column='1') X
