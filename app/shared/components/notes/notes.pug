div.modal.notes(ng-if="notesOpen")
  div.title
    a.hide-row(ng-click="n.notesClose()")
    h4 Notes For Walmed & Feller

  div.no-notes(ng-if="n.notes.length <= 0")
    h5 There are no notes for this <br />account yet.
    button.btn-action + Add A New Note
    br
    img(src="../assets/img/icons/no-notes.svg").no-notes-image
  md-progress-circular(ng-if="n.loading" md-mode="indeterminate" md-diameter="100").md-accent
  div.note-container(ng-if="n.notes.length > 0")
    div.new-note
      p(ng-click="n.openCreateNote()").bold <span>+</span> New Note
      div(ng-if="n.creatingNote").create-new-note
        label Topic
        .dropdown-filter
          .dropdown
            md-select(ng-model="n.newNote.title" aria-label="rationale dropdown" placeholder="Select a topic").short
              md-option(aria-label="note title selector" value="{{option}}" ng-model="n.newNote.title" ng-repeat="option in n.noteTopics") {{option}}
              md-option(aria-label="note title selector" value="" ng-click="n.showInput()") + Add a new topic >
        input(ng-if="n.inputToggle" ng-model="n.newNote.title")
        label details
        textarea(ng-model="n.newNote.body")
        button(ng-click="n.createNote(n.newNote)").btn-action Save
        p(ng-click="n.cancelNewNote(n.newNote)").cancel.accent X Cancel

    div.note-body(ng-repeat="note in n.notes | orderBy:'date'")
      div(ng-if="note.deleteConfirmation").delete-confirm
        h4 Are you sure you want to delete this note?
        div.buttons
          button(ng-click="n.deleteNote(note)").btn-action Yes
          p(ng-click="n.toggleDelete(note)").cancel.accent X Cancel
      div(ng-if="!note.deleteConfirmation")
        h4 {{note.title}} <span ng-if="note.attachments" class="attachments"></span>
        p {{note.body | limitTo: n.numLimit}} <span class="read-more" ng-if="note.numLimit <= 150 || !note.numLimit" ng-click="n.readMore(note)")>...Read More</span>
        .note-attachments(ng-if="note.noteDetails")
          div.attachement-header
            .attachments
              p.accent Attachments
            .download-all
              a(href="#") Download All
          ul
            //- This will need to be upodated with API
            //- TODO This needs to be refactored to be less DRY
            li(ng-repeat="attachment in n.attachments")
              div.attached-files
                .photo(ng-if="attachment.fileType === 'PNG'")
                  img.thumbnail(src="{{attachment.thumbnail}}")
                  p.file-name {{attachment.name}}&nbsp;({{attachment.fileSize}})
                  div(ng-click="n.showImage(attachment)" ng-class="{'chevron-down': !attachment.visible, 'chevron-up': attachment.visible}")
                  img(src="{{attachment.url}}" ng-if="attachment.visible")
                .spreadsheet(ng-if="attachment.fileType === 'XLS'")
                  img.thumbnail(src="../assets/img/icons/download-xls-c.svg")
                  p.file-name {{attachment.name}}&nbsp;({{attachment.fileSize}})
                .video(ng-if="attachment.fileType === 'MP4'")
                  img.thumbnail(src="../assets/img/icons/download-mov-c.svg")
                  p.file-name {{attachment.name}}&nbsp;({{attachment.fileSize}})
                .audio(ng-if="attachment.fileType === 'MP3'")
                  img.thumbnail(src="../assets/img/icons/download-mp3-c.svg")
                  p.file-name {{attachment.name}}&nbsp;({{attachment.fileSize}})
                .other(ng-if="attachment.fileType === 'OTHER'")
                  img.thumbnail(src="../assets/img/icons/download-other-c.svg")
                  p.file-name {{attachment.name}}&nbsp;({{attachment.fileSize}})
                .pdf(ng-if="attachment.fileType === 'PDF'")
                  img.thumbnail(src="../assets/img/icons/download-pdf-c.svg")
                  p.file-name {{attachment.name}}&nbsp;({{attachment.fileSize}})
                .powerpoint(ng-if="attachment.fileType === 'PPT'")
                  img.thumbnail(src="../assets/img/icons/download-ppt-c.svg")
                  p.file-name {{attachment.name}}&nbsp;({{attachment.fileSize}})
                .zip(ng-if="attachment.fileType === 'ZIP'")
                  img.thumbnail(src="../assets/img/icons/download-zip-c.svg")
                  p.file-name {{attachment.name}}&nbsp;({{attachment.fileSize}})
                .document(ng-if="attachment.fileType === 'DOC'")
                  img.thumbnail(src="../assets/img/icons/download-doc-c.svg")
                  p.file-name {{attachment.name}}&nbsp;({{attachment.fileSize}})
          div
            //- .add-attachments(ng-if="note.author === 'Me'")
            .add-attachments()
              p Add an attachment
              div(ng-if="n.fileUploadActive")
                form(name="fileUpload")
                    fieldset
                      legend Upload a fileType
                      label File
                      input(type="file" ngf-select ng-model="picFile" name="file" accept="image/*" required)
                      br
                      button(ng-click="n.uploadPic(picFile)").btn-action Submit
        .note-body-footer
          p by <span class="note-author"> {{note.author}}</span>  <span class="note-date">{{note.date | date:"dd MMMM, yyyy 'at' h:mm a"}}</span>
          .icons
            .delete-note(ng-if="note.author === 'Me'" ng-click="n.toggleDelete(note)")
            div(ng-click="n.isEditing(note)" ng-class="{'edit-note': !note.editMode, 'edit-note-active': note.editMode}")
            //- div(ng-if="note.author === 'Me'" ng-click="n.isEditing(note)" ng-class="{'edit-note': !note.editMode, 'edit-note-active': note.editMode}")
            .email-note
        div.notes-editing(ng-if="note.editMode")
          div.main-note-section
            div
              label Topic
              .dropdown-filter
                .dropdown
                  md-select(ng-model="note.title" aria-label="rationale dropdown" placeholder="Select a topic").short
                    md-option(aria-label="note title selector" value="{{option}}" ng-model="note.title" ng-repeat="option in n.noteTopics") {{option}}
                    md-option(aria-label="note title selector" value="" ng-click="n.showInput()") + Add a new topic >
              input(ng-if="n.inputToggle" ng-model="note.title")
            label Details
            textarea(ng-model="note.body")
            div.inline-container
              .attachments
                p.accent Attachments
              .download-all
                p Download All
            ul
              li
                .photo
                  p IMG1009.PNG (3.3 MB)
              li
                .photo
                  p IMG1010.PNG (4.3 MB)
            div
              .add-attachments
                p Add an attachment
